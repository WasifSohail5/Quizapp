@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================
   Base / Theme Tokens
   ========================= */
@layer base {
  :root {
    --bg-0: #000000;
    --neon-emerald: 0 255 224;   /* rgb triplets for opacity utilities */
    --neon-cyan:    0 128 255;
    --neon-fuchsia: 255 0 128;
    --glass: 255 255 255;

    --text-0: 255 255 255;
    --text-dim: 200 200 200;

    /* Fluid type clamps for responsiveness */
    --step--1: clamp(0.80rem, 0.76rem + 0.20vw, 0.95rem);
    --step-0:  clamp(0.95rem, 0.88rem + 0.35vw, 1.10rem);
    --step-1:  clamp(1.10rem, 0.98rem + 0.60vw, 1.35rem);
    --step-2:  clamp(1.35rem, 1.15rem + 1.10vw, 1.80rem);
    --step-3:  clamp(1.80rem, 1.50rem + 1.60vw, 2.40rem);
    --step-4:  clamp(2.40rem, 1.90rem + 2.40vw, 3.20rem);
  }

  html, body, #root {
    height: 100%;
  }

  body {
    font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
    color: rgb(var(--text-0));
    margin: 0;
    padding: 0;
    min-height: 100vh;
    overflow-x: hidden;
    background: var(--bg-0);
    /* Neon starfield + scanline + subtle radial glows */
    background-image:
      radial-gradient(circle at 50% 30%, rgba(var(--neon-emerald) / 0.10), transparent 55%),
      radial-gradient(circle at 80% 70%, rgba(var(--neon-fuchsia) / 0.10), transparent 55%),
      radial-gradient(circle at 20% 80%, rgba(var(--neon-cyan) / 0.10), transparent 55%),
      repeating-linear-gradient(0deg, rgba(255 255 255 / 0.04) 0px, rgba(255 255 255 / 0.04) 1px, transparent 1px, transparent 3px);
  }

  /* Smooth font rendering */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Respect reduced motion */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.001ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.001ms !important;
      scroll-behavior: auto !important;
    }
  }
}

/* =========================
   Components
   ========================= */
@layer components {
  /* Glass card with subtle neon edge */
  .card-arcade {
    @apply rounded-2xl border border-white/10 bg-white/5 backdrop-blur px-5 py-6 shadow-[0_0_35px_rgba(0,255,224,0.08)];
  }

  /* Primary arcade button */
  .btn-arcade {
    @apply relative inline-flex items-center justify-center overflow-hidden rounded-xl px-4 py-3 font-bold text-black
           bg-emerald-400/90 transition focus:outline-none;
  }
  .btn-arcade::before {
    content: "";
    @apply absolute inset-0 -z-10 opacity-0 transition;
    background: linear-gradient(90deg,
      rgba(var(--neon-emerald) / 1),
      rgba(var(--neon-cyan) / 1),
      rgba(var(--neon-fuchsia) / 1)
    );
  }
  .btn-arcade:hover::before { @apply opacity-100; }

  /* Muted glass button */
  .btn-glass {
    @apply rounded-xl border border-white/15 bg-white/5 px-4 py-2 text-sm font-semibold text-white/90
           backdrop-blur transition hover:border-emerald-400/40 hover:bg-emerald-400/10;
  }

  /* HUD pill */
  .hud-pill {
    @apply rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-white/80;
  }

  /* Data rows used in lists/leaderboards */
  .row-arcade {
    @apply grid items-center gap-3 overflow-hidden rounded-2xl border border-white/10 bg-white/5 p-4 backdrop-blur;
  }

  /* Neon heading gradient */
  .gradient-heading {
    background: linear-gradient(90deg,
      rgba(var(--neon-emerald) / 1) 0%,
      rgba(var(--neon-cyan) / 1) 50%,
      rgba(var(--neon-fuchsia) / 1) 100%
    );
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    text-shadow: 0 0 25px rgba(var(--neon-emerald) / 0.25);
  }

  /* Neon grid “floor” helper */
  .neon-grid {
    position: relative;
  }
  .neon-grid::after {
    content: "";
    position: absolute;
    left: 50%;
    bottom: 0;
    transform: translateX(-50%);
    height: 55vh;
    width: 140vw;
    background-image:
      linear-gradient(rgba(var(--neon-emerald) / 0.15) 1px, transparent 1px),
      linear-gradient(90deg, rgba(var(--neon-emerald) / 0.15) 1px, transparent 1px);
    background-size: 40px 40px;
    -webkit-mask-image: linear-gradient(to top, black, transparent 70%);
            mask-image: linear-gradient(to top, black, transparent 70%);
    pointer-events: none;
    z-index: -1;
  }

  /* Responsive container with safe padding */
  .page-wrap {
    @apply mx-auto w-full px-4 sm:px-6 md:px-8 max-w-6xl;
  }
}

/* =========================
   Utilities (responsive helpers)
   ========================= */
@layer utilities {
  /* Fluid typography utilities */
  .text-fluid-xs { font-size: var(--step--1); }
  .text-fluid-sm { font-size: var(--step-0); }
  .text-fluid   { font-size: var(--step-1); }
  .text-fluid-lg{ font-size: var(--step-2); }
  .text-fluid-xl{ font-size: var(--step-3); }
  .text-fluid-2xl{ font-size: var(--step-4); }

  /* Ellipsis helpers */
  .truncate-1 { @apply truncate; }
  .truncate-2 {
    display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
  }

  /* Scrollbar styling */
  .scrollbar-neon {
    scrollbar-width: thin;
    scrollbar-color: rgba(var(--neon-cyan)/.6) transparent;
  }
  .scrollbar-neon::-webkit-scrollbar { height: 8px; width: 8px; }
  .scrollbar-neon::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, rgba(var(--neon-cyan)/.8), rgba(var(--neon-fuchsia)/.8));
    border-radius: 9999px;
  }

  /* Glow helpers */
  .glow-emerald { box-shadow: 0 0 30px rgba(var(--neon-emerald) / 0.25); }
  .glow-cyan    { box-shadow: 0 0 30px rgba(var(--neon-cyan) / 0.25); }
  .glow-fuchsia { box-shadow: 0 0 30px rgba(var(--neon-fuchsia) / 0.25); }

  /* Starfield overlay (use on a wrapper div) */
  .starfield {
    background:
      radial-gradient(circle at 50% 30%, rgba(var(--neon-emerald)/0.12), transparent 55%),
      radial-gradient(circle at 80% 70%, rgba(var(--neon-fuchsia)/0.12), transparent 55%),
      radial-gradient(circle at 20% 80%, rgba(var(--neon-cyan)/0.12), transparent 55%),
      repeating-linear-gradient(0deg, rgba(255 255 255 / 0.05) 0, rgba(255 255 255 / 0.05) 1px, transparent 1px, transparent 3px);
  }

  /* Grid helpers for cards/lists */
  .grid-responsive {
    display: grid;
    grid-template-columns: 1fr;
    gap: 0.75rem;
  }
  @screen sm { .grid-responsive { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
  @screen lg { .grid-responsive { grid-template-columns: repeat(3, minmax(0, 1fr)); } }

  /* HUD ribbon for top-of-page info */
  .hud {
    @apply flex items-center justify-between gap-3 rounded-xl border border-white/10 bg-white/5 px-3 py-2 backdrop-blur;
  }

  /* Safe-area padding on mobile */
  .safe-px { padding-left: max(1rem, env(safe-area-inset-left)); padding-right: max(1rem, env(safe-area-inset-right)); }
  .safe-py { padding-top: max(1rem, env(safe-area-inset-top));  padding-bottom: max(1rem, env(safe-area-inset-bottom)); }

  /* Gradient text helper */
  .gradient-text {
    background: linear-gradient(90deg,
      rgba(var(--neon-emerald)/1), rgba(var(--neon-cyan)/1), rgba(var(--neon-fuchsia)/1));
    -webkit-background-clip: text; background-clip: text; color: transparent;
  }

  /* Simple glass */
  .glass { @apply bg-white/5 backdrop-blur border border-white/10; }
}

/* =========================
   Animations (names avoid Tailwind defaults)
   ========================= */
@keyframes floatY {
  0% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0); }
}

@keyframes spinSlow {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulseGlow {
  0%   { opacity: .6; transform: scale(.98); }
  50%  { opacity: .9; transform: scale(1.02); }
  100% { opacity: .6; transform: scale(.98); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

/* Utility classes for animations */
.animate-floatY { animation: floatY 2.2s ease-in-out infinite; }
.spin-slow      { animation: spinSlow 4s linear infinite; }
.glow-pulse     { animation: pulseGlow 4s ease-in-out infinite; }

/* Shimmer skeleton loader */
.skeleton {
  background: linear-gradient(90deg, rgba(255 255 255 / .06), rgba(255 255 255 / .15), rgba(255 255 255 / .06));
  background-size: 200% 100%;
  animation: shimmer 1.4s infinite linear;
  border-radius: 0.75rem;
}

/* =========================
   Legacy helpers (kept for compatibility)
   ========================= */
@layer components {
  .card {
    @apply bg-white/90 rounded-xl shadow-2xl p-6 transition-transform duration-300 hover:scale-105;
  }
  .math-symbol {
    @apply inline-block text-2xl font-bold text-fuchsia-400;
  }
}
